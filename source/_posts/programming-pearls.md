---
title: 《编程珠玑》读后感
date: 2019-03-24 16:06:33
categories: Reading
tags:
photos:
    - book.png
author:
---

写过很多代码，做过很多项目。越是熟悉的东西，经手的时候可能越不想要思考。代码风格、逻辑思考，正是习惯了某一套，所以不管好的坏的都这样沿袭下来。最佳方案还是应该在一切套路形成之初，就醍醐灌顶，深知一些原则的重要性。如果身边没有大牛指点，或许，《编程珠玑》可以帮这个忙。

这本书原本是刊登在报纸上，抛出一些问题引人思考的。由于太受欢迎，作者便拾珠成串。颇似某些作家在博客上受欢迎后出些文集的做法。不过作者的这本书除了时时刻刻给些小点子以外，还注意系统性地整理，因此不会显得太凌乱。除非你像我一样，断断续续地看上四个月……

总的来说，书的前两部分内容对我比较有启发。第三部分的代码实现科普了一些常用的数据结构，如堆、字符串等，和以前上课的内容差不多，就没有太大感觉。习题大部分都会给出解答（虽然有点 freestyle ），值得闭上书自己思考一番。也有题目本身比较放飞的比较难以给出解释。最后，作者在跋的部分写下了理想中程序员的守则，可以说是全书的中心思想了。

> 对程序员的10条建议。 
- 解决正确的问题。 
- 探索所有可能的解决方案。 
- 观察数据。 
- 使用粗略估算。 
- 利用对称性。 
- 利用组件做设计。 
- 建立原型。 
- 必要时进行权衡。 
- 保持简单。 
- 追求优美。

学过计算机的人和没学过计算机的人，在思考方式上确实会存在一些差异。比如描述问题时，没学过计算机的人一般把题目大意说完，而学过计算机的人，则会很纠结问题的数据范围和边界。因为数据范围关系到方法的选取。就像当年算法课上老师提出一个问题，往往有比较多的方案，适用于不同的数据范围。如果数据量比较小，简单易行的方法（往往也意味着暴力）就能 pass ；当数据量比较大时，我们就要绞尽脑汁去构造巧妙的解决方案。而方法一旦复杂，就很容易写出 dirty 的代码，而且验证正确性也更难了。

书中提到一个非常必要缺被我忽略的东西——“脚手架”。造房子需要外面的一层脚手架在施工的时候便于工人行动；写代码也是如此。我们需要时时刻刻保证输入的是合法的数据，输出的也是定义范围内的数据。“脚手架”就是用来保障这一点的断言和测试。无非是多了几行类似于注释的代码，就像在水泥里加了钢筋，可以使得写出来的代码更为健壮。在我以前写代码的时候，几乎从未写过断言。可能是程序逻辑过于简单（也可能是我过于自信）。当我尝试着用这样的中心思想去写代码以后，很多问题都可以引刃而解。比如我以前写二分搜索时，经常会陷入死循环，搜索区间被锁定在一个或者两个数字身上，却始终无法跳出循环。于是我死马当活马医，写了一个“如果二分了 64 次，就直接跳出循环”（一般区间长度都不会大于 $2^{64}$）。但究其原因，是因为我的输入数据并不满足我二分时候的前提，如果在此处加个断言，就能避免死循环。

> 该程序代码可以信赖吗？你可以信任我。（呵呵，但也不要什么话都相信啊，我现在有一座大桥要出售，你想不想买？）

作者很幽默地提示了我们，手上的代码并不一定完美。我们能相信的只有测试结果和实际表现。测试是一开始费时费力的投入，但到后期可以自动化测试的时候，这就体现出了效率。如果我们没有 OpenJudge 还怎么刷题？请谁给我们一行一行看代码吗？思路不同怎么办？所以说，有测试才是一个美好的世界。

书中还有一处雷人的例子在 Van Wyk 制作一个拼写检查程序时，用到的种种精简。早年计算机内存是只有几兆的，根本存不下单词表。Van Wyk 无所不用其极（具体做法可以看书里的第十章），在空间与时间的权衡之下，完美完成了任务。这也一种启示。例如上周做到一道题，问 $n^n\%10$ 等于几？$n$ 最大有 $10^9$。你可以选择快速幂。但你如果对数学有点研究就会发现，其中会有循环节，完全可以打出 $10*10$ 的表（实际上更小）来存答案。当然，优雅而简洁的代码是我们毕生的追求。用 FH 的话说，要写出可以当传家宝的代码~

今天读后感就写到这里啦，我们下期再见~（其实台下的观众就我一个）